"use strict";(self.webpackChunkuptrader_todo=self.webpackChunkuptrader_todo||[]).push([[610],{2217:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var s=n(184),a=function(e){var t=e.children;return(0,s.jsx)("div",{className:"container",children:t})}},3094:function(e,t,n){var s=n(4942),a=n(1413),r=n(9439),i=n(2791);t.Z=function(e){var t=(0,i.useState)(e),n=(0,r.Z)(t,2),l=n[0],c=n[1];return[l,function(e){c((0,a.Z)((0,a.Z)({},l),{},(0,s.Z)({},e.target.name,e.target.value)))}]}},3610:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var s=n(9439),a=n(2791),r=n(2217),i=n(1087),l=n(3531),c=n(3105),d=function(e){for(var t=0,n=Object.values(e);t<n.length;t++){var s=n[t];if("string"===typeof s&&0===s.length)return!1}return!0},o=n(3094),u=n(184),m=(0,l.$j)(null,(function(e){return{addTask:function(t){return e((n=t,{type:c.F.ADD_NEW_TASK,payload:n}));var n}}}))((function(e){var t=e.id,n=e.addTask,a=new Date(Date.now()),r=(0,o.Z)({title:"",description:"",project_id:t,start_date:a}),i=(0,s.Z)(r,2),l=i[0],c=i[1];return(0,u.jsxs)("form",{className:"add-task-form",action:"submit",onSubmit:function(e){e.preventDefault(),l&&n(l)},children:[(0,u.jsxs)("div",{className:"add-input",children:[(0,u.jsx)("label",{htmlFor:"title",children:"Name"}),(0,u.jsx)("input",{name:"title",type:"text",value:l.title,onChange:c})]}),(0,u.jsxs)("div",{className:"add-input",children:[(0,u.jsx)("label",{htmlFor:"description",children:"Description"}),(0,u.jsx)("input",{name:"description",type:"text",value:l.description,onChange:c})]}),(0,u.jsx)("button",{disabled:!d(l),className:"add-btn",type:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})),f=n(6459),h=function(e){return e?e.slice(0,10).split(".").reverse().join("-"):""},x=["nar","An","Alfr","Alvi","Ari","Arinbjorn","Arngeir","Arngrim","Arnfinn","Asgeirr","Askell","Asvald","Bard","Baror","Bersi","Borkr","Bjarni","Bjorn","Brand","Brandr","Cairn","Canute","Dar","Einarr","Eirik","Egill","Engli","Eyvindr","Erik","Eyvind","Finnr","Floki","Fromund","Geirmundr","Geirr","Geri","Gisli","Gizzur","Gjafvaldr","Glumr","Gorm","Grmir","Gunnarr","Guomundr","Hak","Halbjorn","Halfdan","Hallvard","Hamal","Hamundr","Harald","Harek","Hedinn","Helgi","Henrik","Herbjorn","Herjolfr","Hildir","Hogni","Hrani","Ivarr","Hrolf","Jimmy","Jon","Jorund","Kalf","Ketil","Kheldar","Klaengr","Knut","Kolbeinn","Kolli","Kollr","Lambi","Magnus","Moldof","Mursi","Njall","Oddr","Olaf","Orlyg","Ormr","Ornolf","Osvald","Ozurr","Poror","Prondir","Ragi","Ragnvald","Refr","Runolf","Saemund","Siegfried","Sigmundr","Sigurd","Sigvat","Skeggi","Skomlr","Slode","Snorri","Sokkolf","Solvi","Surt","Sven","Thangbrand","Thjodoft","Thorod","Thorgest","Thorvald","Thrain","Throst","Torfi","Torix","Tryfing","Ulf","Valgaror","Vali","Vifil","Vigfus","Vika","Waltheof"],j=(0,l.$j)(null,(function(e){return{replyComment:function(t){return e((n=t,{type:c.F.REPLY_TO_COMMENT,payload:n}));var n}}}))((function e(t){var n=t.taskId,r=t.comment,i=t.replyComment,l=new Date(Date.now()).toLocaleString(),c=(r.children||[]).map((function(t){return(0,u.jsx)(e,{replyComment:i,taskId:n,comment:t},t.commentId)})),m=(0,o.Z)({taskId:n,commentId:r.commentId,text:"",creation_date:l}),f=(0,s.Z)(m,2),j=f[0],p=f[1],v=(0,a.useState)(!1),b=(0,s.Z)(v,2),k=b[0],g=b[1],y=function(){g((function(e){return!e}))},N=(0,a.useState)(""),S=(0,s.Z)(N,2),T=S[0],D=S[1];return(0,a.useEffect)((function(){var e;D((e=x)[Math.floor(Math.random()*e.length)])}),[]),(0,u.jsxs)("div",{style:{padding:"10px",borderLeft:"1px solid #4a4f50"},children:[(0,u.jsxs)("div",{className:"date comment-container",children:[(0,u.jsx)("p",{children:T}),(0,u.jsx)("p",{className:"comment-text",children:r.text}),(0,u.jsxs)("div",{className:"comment-extra",children:[(0,u.jsx)("p",{children:h(r.creation_date)}),(0,u.jsx)("button",{onClick:y,className:"answer",children:"Reply"})]}),k?(0,u.jsx)("div",{className:"answer-form",children:(0,u.jsxs)("form",{action:"submit",onSubmit:function(e){e.preventDefault(),i(j),y()},children:[(0,u.jsx)("input",{name:"text",className:"answer-input",type:"text",value:j.text,onChange:p}),(0,u.jsx)("button",{disabled:!d(j),type:"submit",className:"add-btn answer-button",children:"Reply"})]})}):null]}),c]})})),p=(0,l.$j)(null,(function(e){return{addComment:function(t){return e((n=t,{type:c.F.ADD_NEW_COMMENT,payload:n}));var n}}}))((function(e){var t=e.id,n=e.comments,a=e.addComment,r=new Date(Date.now()).toLocaleString(),i=(0,o.Z)({id:t,text:"",creation_date:r}),l=(0,s.Z)(i,2),c=l[0],d=l[1];return(0,u.jsxs)("div",{className:"form-comments-container",children:[(0,u.jsxs)("form",{className:"add-comments-form",action:"submit",onSubmit:function(e){e.preventDefault(),c&&(a(c),c.creation_date=r)},children:[(0,u.jsx)("input",{name:"text",placeholder:"Type comment",type:"text",value:c.text,onChange:d}),(0,u.jsx)("button",{className:"add-btn",disabled:!c.text.length,type:"submit",children:"Send comment"})]}),(0,u.jsx)("div",{className:"comments-container",children:n.length>0&&n.map((function(e){return(0,u.jsx)(j,{taskId:t,comment:e},e.commentId)}))})]})})),v=n(1413),b=n(6856),k=n(8820),g=n(1213),y=(0,l.$j)(null,(function(e){return{updateStatus:function(t){return e((n=t,{type:c.F.UPDATE_SUBTASK_STATUS,payload:n}));var n},deleteSubTask:function(t){return e((n=t,{type:c.F.DELETE_SUBTASK,payload:n}));var n}}}))((function(e){var t=e.taskId,n=e.subTask,r=e.updateStatus,i=e.deleteSubTask,l=function(e){return"incompleted"===e?"completed":"incompleted"},c=(0,a.useState)({taskId:t,subTaskId:n.subTaskId,status:l(n.status)}),d=(0,s.Z)(c,2),o=d[0],m=d[1],f=(0,a.useState)({taskId:t,subTaskId:n.subTaskId}),h=(0,s.Z)(f,1)[0];return(0,a.useEffect)((function(){m((0,v.Z)((0,v.Z)({},o),{},{status:l(n.status)}))}),[n.status]),(0,u.jsxs)("div",{className:"subtask",children:[(0,u.jsxs)("div",{className:"info",children:[(0,u.jsx)("div",{className:"status",children:"completed"===n.status?(0,u.jsx)("i",{style:{color:"#1D795F"},children:(0,u.jsx)(k.mny,{})}):(0,u.jsx)("i",{style:{color:"#D64A4A"},children:(0,u.jsx)(b.Fbu,{})})}),(0,u.jsx)("div",{className:"text",children:(0,u.jsx)("p",{children:n.text})})]}),(0,u.jsxs)("div",{className:"actions",children:[(0,u.jsx)("button",{onClick:function(){r(o)},className:"action-button",children:"incompleted"===n.status?(0,u.jsx)("i",{style:{color:"#1D795F"},children:(0,u.jsx)(k.mny,{})}):(0,u.jsx)("i",{style:{color:"#D64A4A"},children:(0,u.jsx)(g.toq,{})})}),(0,u.jsx)("button",{onClick:function(){i(h)},className:"action-button",children:(0,u.jsx)("i",{style:{color:"#D64A4A"},children:(0,u.jsx)(b.ZkW,{})})})]})]})})),N=(0,l.$j)(null,(function(e){return{addSubTask:function(t){return e((n=t,{type:c.F.ADD_NEW_SUBTASK,payload:n}));var n}}}))((function(e){var t=e.id,n=e.subTasks,a=e.addSubTask,r=(0,o.Z)({id:t,text:""}),i=(0,s.Z)(r,2),l=i[0],c=i[1];return(0,u.jsxs)("div",{className:"form-subtasks-container",children:[(0,u.jsxs)("form",{className:"add-subtasks-form",action:"submit",onSubmit:function(e){e.preventDefault(),l&&a(l)},children:[(0,u.jsx)("input",{name:"text",placeholder:"Type subtask",type:"text",value:l.text,onChange:c}),(0,u.jsx)("button",{className:"add-btn",disabled:!l.text.length,type:"submit",children:"Create subtask"})]}),(0,u.jsx)("div",{className:"subtasks-container",children:n.length>0&&n.map((function(e){return(0,u.jsx)(y,{taskId:t,subTask:e},e.subTaskId)}))})]})})),S=(0,l.$j)(null,(function(e){return{updateTask:function(t){return e((n=t,{type:c.F.UPDATE_TASK_INFO,payload:n}));var n},deleteTask:function(t){return e((n=t,{type:c.F.DELETE_TASK,payload:n}));var n}}}))((function(e){var t=e.task,n=e.deleteTask,a=e.updateTask,r=(0,o.Z)({id:t.id,title:t.title,description:t.description,priority:t.priority}),i=(0,s.Z)(r,2),l=i[0],c=i[1],m="";switch(t.status){case"queue":m="#CD5C5C";break;case"development":m="#DE9A43";break;case"done":m="#1D795F";break;default:m=""}var f=new Date(Date.now()),x=new Date(t.start_date),j=f.getTime()-x.getTime(),p=Math.floor(j/864e5);return(0,u.jsxs)("form",{action:"submit",onSubmit:function(e){e.preventDefault(),l&&a(l)},children:[(0,u.jsxs)("div",{className:"field",children:[(0,u.jsx)("label",{htmlFor:"title",children:"Title"}),(0,u.jsx)("input",{type:"text",name:"title",value:l.title,onChange:c})]}),(0,u.jsxs)("div",{className:"field",children:[(0,u.jsx)("label",{htmlFor:"description",children:"Description"}),(0,u.jsx)("textarea",{name:"description",value:l.description,onChange:c})]}),(0,u.jsxs)("div",{className:"field",children:[(0,u.jsx)("label",{htmlFor:"priority",children:"Priority"}),(0,u.jsx)("select",{name:"priority",onChange:c,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("option",{value:l.priority,children:l.priority}),["low","middle","high"].map((function(e,t){return(0,u.jsx)("option",{value:e,children:e},t)}))]})})]}),(0,u.jsxs)("div",{className:"field",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)("div",{className:"status",style:{backgroundColor:m},children:t.status.toUpperCase()})]}),(0,u.jsxs)("div",{className:"field",children:[(0,u.jsx)("span",{children:"Working time"}),(0,u.jsxs)("div",{className:"working-time",children:[p," days"]})]}),(0,u.jsxs)("div",{className:"date",children:[(0,u.jsxs)("p",{children:["Created: ",h(t.start_date.toString())]}),(0,u.jsxs)("p",{children:["Finished: ",h(t.end_date)]})]}),(0,u.jsxs)("div",{className:"button-container",children:[(0,u.jsx)("button",{disabled:!d(l),className:"button edit",type:"submit",children:"Edit"}),(0,u.jsx)("button",{className:"button delete",type:"button",onClick:function(){return e=t.id,void n(e);var e},children:"Delete"})]})]})})),T=function(e){var t=e.task;return(0,u.jsxs)("div",{className:"form",children:[(0,u.jsx)(S,{task:t}),(0,u.jsx)(N,{id:t.id,subTasks:t.sub_tasks}),(0,u.jsx)(p,{id:t.id,comments:t.comments})]})},D=n(9126),Z=(n(5582),function(){return(0,u.jsxs)("div",{className:"drag-container",children:[(0,u.jsx)("span",{className:"drag-dot"}),(0,u.jsx)("span",{className:"drag-dot"}),(0,u.jsx)("span",{className:"drag-dot"}),(0,u.jsx)("span",{className:"drag-dot"}),(0,u.jsx)("span",{className:"drag-dot"}),(0,u.jsx)("span",{className:"drag-dot"})]})}),C=function(e){var t=e.children,n=e.close;return(0,u.jsx)("div",{className:"modal-overlay",children:(0,u.jsxs)("div",{className:"modal",children:[(0,u.jsx)("span",{className:"modal-close",onClick:function(e){n(!1)}}),t]})})},A=n(1067),_=n(7762),E=function(e){var t=e.task,n=(0,A.c)((function(){return{type:"task",item:{id:t.id},collect:function(e){return{isDragging:!!e.isDragging()}}}})),r=(0,s.Z)(n,2),i=r[0].isDragging,l=r[1],c=function(e){var t={};return function e(n){var s,a=(0,_.Z)(n);try{for(a.s();!(s=a.n()).done;){var r=s.value;r.commentId&&(t[r.commentId]=(t[r.commentId]||0)+1),r.children.length>0&&e(r.children)}}catch(i){a.e(i)}finally{a.f()}}(e),t}(t.comments),d=(0,a.useState)(!1),o=(0,s.Z)(d,2),m=o[0],f=o[1],x="";switch(t.priority){case"high":x="#cd5c5c";break;case"middle":x="#de9a43";break;case"low":x="#1d795f";break;default:x=""}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{ref:l,style:{opacity:i?"0.25":"1",background:"linear-gradient(145deg, #353839 70%, ".concat(x," 150%)")},className:"custom-div",onClick:function(){f(!0)},children:[(0,u.jsxs)("div",{className:"task-heading",children:[(0,u.jsx)("h1",{children:t.title}),(0,u.jsx)(Z,{})]}),(0,u.jsx)("p",{className:"description",children:t.description}),(0,u.jsxs)("div",{className:"comments-subtasks",children:[(0,u.jsxs)("div",{className:"comments",children:[(0,u.jsx)("i",{children:(0,u.jsx)(k.RG4,{})}),(0,u.jsx)("span",{children:Object.keys(c).length})]}),(0,u.jsxs)("div",{className:"subtasks",children:[(0,u.jsx)("i",{children:(0,u.jsx)(D.y9N,{})}),(0,u.jsx)("span",{children:t.sub_tasks.length})]})]}),(0,u.jsxs)("div",{className:"date",children:[(0,u.jsxs)("p",{children:["Created: ",h(t.start_date.toString())]}),(0,u.jsxs)("p",{children:["Finished: ",h(t.end_date)]})]})]}),m&&(0,u.jsx)(C,{close:f,children:(0,u.jsx)(T,{task:t})})]})},F=function(e){var t=e.status;return(0,u.jsx)("div",{className:"task-status-header",children:(0,u.jsx)("h1",{children:t})})},I=n(8422),w=(0,l.$j)(null,(function(e){return{updateStatus:function(t,n){return e((s={id:t,status:n},{type:c.F.UPDATE_TASK_STATUS,payload:s}));var s}}}))((function(e){var t=Object.assign({},((0,f.Z)(e),e)),n=(0,I.L)((function(){return{accept:"task",drop:function(e){return l(e.id)},collect:function(e){return{isOver:!!e.isOver()}}}})),a=(0,s.Z)(n,2),r=a[0].isOver,i=a[1],l=function(e){t.updateStatus(e,t.status)},c=[];switch(t.status){case"queue":c=t.queue;break;case"development":c=t.development;break;case"done":c=t.done;break;default:c=[]}return(0,u.jsxs)("div",{ref:i,style:{background:r?"#4d5254":""},className:"task-list-container",children:[(0,u.jsx)(F,{status:t.status}),c.length>0&&c.map((function(e){return(0,u.jsx)(E,{task:e},e.id)}))]})})),O=function(e){var t=e.tasks,n=(0,a.useMemo)((function(){return t.filter((function(e){return"queue"===e.status}))}),[t]),s=(0,a.useMemo)((function(){return t.filter((function(e){return"development"===e.status}))}),[t]),r=(0,a.useMemo)((function(){return t.filter((function(e){return"done"===e.status}))}),[t]);return(0,u.jsx)("div",{className:"task-section",children:["queue","development","done"].map((function(e,t){return(0,u.jsx)(w,{status:e,queue:n,development:s,done:r},t)}))})},H=n(5987),K=["children"],M=function(e){var t=e.children,n=(0,H.Z)(e,K);return(0,u.jsx)("button",(0,v.Z)((0,v.Z)({type:"button"},n),{},{children:t}))},G=function(e){var t=Object.assign({},((0,f.Z)(e),e));return(0,u.jsx)("input",(0,v.Z)({type:"text"},t))},B=(0,l.$j)((function(e){return{tasks:e.tasks.data}}),null)((function(e){var t=e.tasks,n=e.id,l=(0,a.useState)(!1),c=(0,s.Z)(l,2),d=c[0],o=c[1],f=(0,a.useState)([]),h=(0,s.Z)(f,2),x=h[0],j=h[1],p=(0,a.useState)(""),v=(0,s.Z)(p,2),b=v[0],k=v[1],g=function(e,t){var n=(0,a.useState)(e),r=(0,s.Z)(n,2),i=r[0],l=r[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){l(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i}(b,300),y=function(e){return e?x.filter((function(t){return t.title.includes(e)})):x}(g);return(0,a.useEffect)((function(){if(t.length){!function(){var e=t.filter((function(e){return e.project_id===n}));j(e)}()}}),[t,n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-level-btns-container",children:[(0,u.jsx)(M,{className:"call-modal-button top-level-button",onClick:function(){return o(!0)},children:(0,u.jsx)("span",{children:"+"})}),(0,u.jsx)(M,{className:"back-to-projects top-level-button",children:(0,u.jsx)(i.OL,{to:"/",children:(0,u.jsx)("span",{children:"\u27f8"})})})]}),(0,u.jsxs)(r.Z,{children:[(0,u.jsx)(G,{placeholder:"Enter task's name",onChange:function(e){return function(e){k(e.target.value)}(e)}}),t.length?(0,u.jsx)(O,{tasks:y}):null]}),d&&(0,u.jsx)(C,{close:o,children:(0,u.jsx)(m,{id:n})})]})}))},5582:function(){}}]);
//# sourceMappingURL=610.aa597527.chunk.js.map